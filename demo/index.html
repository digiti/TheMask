<!DOCTYPE html>
<html>
  <head>
    <title>TheMask demo</title>
    <link rel="stylesheet" href="./assets/normalize.css" />
    <link rel="stylesheet" href="./assets/main.css" />

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0">
    <style>
      /* begin demo embedded styles */
      * {
        margin: 0;
        padding: 0;
      }

      body {
        background: #1e1f23;
      }

      h1, p {
        text-align: center;
        color: white;
      }

      a {
        color: #1a609b;
      }

      h1 {
        margin: 1.2em 0;
      }

      #container,
      #container .header,
      #iphone {
        width: 500px; height: 500px;
      }

      #container {
        position: absolute;
        top: 200px;
        left: 50%;

        margin: 0 0 0 -250px;
        /*margin: 0 auto;*/
        overflow: visible;

        cursor: pointer;

        -webkit-transition: width 0.5s, top 0.5s, left 0.5s, margin-left 0.5s;
        transition: width 0.5s, top 0.5s, left 0.5s, margin-left 0.5s;

        -webkit-transform: translateZ(0);
      }

      #container.open {
        position: fixed;
        top: 0; left: 0%;

        width: 100%;
        height: 100%;

        margin-left: 0;

        overflow-x: hidden;
        overflow-y: hidden;

        -webkit-overflow-scrolling: none;

        /*background: #1e1f21;*/
      }

      #container .header {
        position: relative;
        width: 100%;
      }

      #iphone {
        position: absolute;
        top: 0px; left: 50%;

        -webkit-transform: translateX(-50%);
        -ms-transform: translateX(-50%);
        transform: translateX(-50%);

        -webkit-transition: width 0.5s, height 0.5s, top 0.5s, left 0.5s;
        transition: width 0.5s, height 0.5s, top 0.5s, left 0.5s;
      }

      #iphone svg {
        -webkit-transition: width 0.5s, height 0.5s;
        transition: width 0.5s, height 0.5s;
      }

      #container.open #iphone {
        width: 540px; height: 540px;
        top: 40px;
      }

      #skyline {
        width: 100%;
        height: 100%;

        overflow: hidden;
      }

      #skyline svg {
        height: 100%;

        position: relative;
        left: 50%;

        -webkit-transform: translateX(-50%);
        -ms-transform: translateX(-50%);
        transform: translateX(-50%);
      }

      #container .background {
        position: absolute;
        width: 100%;
        height: 100%;

        background: transparent;

        -webkit-transition: opacity 0.6s;
        transition: opacity 0.6s;

        opacity: 0;
      }

      #container.open .background {
        background: #202123;
        -webkit-transition: opacity 0.6s;
        transition: opacity 0.6s;

        -webkit-transition-delay: 0.35s;
        transition-delay: 0.35s;

        opacity: 1;
      }

      .rel-center {
        position: relative;
        top: 50%; left: 50%;

        -webkit-transform: translateX(-50%) translatey(-50%);
        -ms-transform: translateX(-50%) translatey(-50%);
        transform: translateX(-50%) translatey(-50%);
      }

      .alternative {
        display: none;
      }

      /* end demo embedded styles */
    </style>
  </head>
  <body>
    <h1>TheMask demo</h1>

    <!-- begin demo markup -->

    <div id="container">
      <div class="header">
        <div class="background"></div>

        <div id="skyline">
          <span class="image" data-dimensions="1920,500" data-src="img/skyline.png"></span>
          <span class="mask" data-coords="1020,313 1188,313 1043,313 730,313" data-mask-id="initMask"></span>
          <span class="mask" data-coords="1020,20 1188,282 1043,446 730,345" data-mask-id="closedMask"></span>
          <span class="mask" data-coords="1020,20 1188,302 1003,446 730,375" data-mask-id="middleMask"></span>
          <span class="mask" data-coords="0,0 1920,0 1920,500 0,500" data-mask-id="openMask"></span>
          <div  class="alternative">
            <p>Sorry, your browser does not support 'The Mask.'</p>
          </div>
        </div>

        <div id="iphone">
          <span class="image" data-dimensions="1000,1000" data-src="img/iphone.png"></span>
          <span class="mask" data-coords="38,0 958,0 958,626 666,626 38,626" data-mask-id="initMask"></span>
          <span class="mask" data-coords="38,0 958,0 958,564 666,894 38,690" data-mask-id="closedMask"></span>
          <span class="mask" data-coords="38,0 998,0 958,604 586,894 38,750" data-mask-id="middleMask"></span>
          <span class="mask" data-coords="0,0 1000,0 1000,0 1000,1000 0,1000" data-mask-id="openMask"></span>
          <div  class="alternative rel-center">
            <p>Sorry, your browser does not support 'The Mask.'</p>
          </div>
        </div>
      </div>
    </div>

    <!-- end demo markup -->

    <p>Check out the <a href="https://github.com/digiti/TheMask">project repo</a>.
    <p>Copyright 2015 Digiti</p>


    <!-- dependencies -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

    <!-- the script -->
    <script src="./../dist/TheMask.js"></script>

    <script>
      /* begin demo script */
      // $('html').mousemove(function(e) {
      //   var relX = ((e.pageX/window.innerWidth)-0.5)*2;

      //   $('#iphone svg image').attr('x', relX*20);
      //   // $('#iphone svg image').attr('y', (relX+1)*10);
      // });


      var maskSkyline = new TheMask({
        target: '#skyline',
        duration: 500
      });

      var maskIphone = new TheMask({
        target: '#iphone',
        duration: 500
      });

      maskSkyline.onLoad = function(e){
        console.log('maskSkyline image was loaded!');
        maskSkyline.shapeMask({id:'closedMask'});
      }

      maskIphone.onLoad = function(e){
        console.log('maskIphone image was loaded!');
        maskIphone.shapeMask({id:'closedMask'});
      }


      $('#container').on('click', function(event) {
        event.preventDefault();

        var cm = maskSkyline.get('currentMask');
        var doc = $(this);

        if(cm) {
          if(cm.id=="closedMask"){
            maskSkyline.shapeMask({id:'openMask'});
            maskIphone.shapeMask({id:'openMask'});

            doc.addClass('open');

          } else if(cm.id=="openMask"){
            maskSkyline.shapeMask({id:'closedMask'});
            maskIphone.shapeMask({id:'closedMask'});

            $(this).removeClass('open');
          }
        }
      });

      /* end demo script */
    </script>
  </body>
</html>
